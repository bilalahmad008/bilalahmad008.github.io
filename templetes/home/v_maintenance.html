{% extends 'home/reportbase.html' %}
{% load static %}
{% block body %}



 <div id="wrapper">
        <div class="main-content">
            <div class="row small-spacing">

                <div class="col-xs-12">
                    <div class="container-fluid" style="background-color: rgb(245, 247, 250);">
                      <h3>Vehicle Maintence Form</h3>
                      
                      <form method="post">
                        {% csrf_token %}
                         <!-- row 1 -->
                         <div class="row">
        
                           <div class="form-group col-md-4">
                               <label for="inputName" class="control-label">Employee ID</label>
                               <select class="form-control col-md-4" name="driver_id" id="driver_id" class="form-control"  required="">
                                <option value="">Select Driver</option>
                                {% for i in alldrivers %}
        
                              <option value="{{i.name}}">{{i.name}}</option>
        
                              {% endfor %}
                             </select>
                            </div>

                            <div class="form-group col-md-4">
                               <label for="inputName" class="control-label">Vehicle ID</label>
                               <select class="form-control col-md-4" name="vid" id="vid" class="form-control" placeholder=" Color" required="">
                                      <option value="">Select Vehicle</option>
                                      {% for i in allvehicles %}
        
                              <option value="{{i.vehicleid}}">{{i.vehicleid}}</option>
        
                              {% endfor %}
                             </select>
                            </div>

                            <div class="form-group col-md-4">
                              <label for="inputName" class="control-label">Mechanics ID</label>
                              <select class="form-control col-md-4" name="meachanice_id" id="meachanice_id" class="form-control" placeholder=" Color" required="">
                                      <option value="">Select Mechanice</option>
                                      {% for i in allmechanics %}
        
                              <option value="{{i.name}}">{{i.name}}</option>
        
                              {% endfor %}
                            </select>
                           </div>
                         
        
        
                        </div>
                     
        <!-- row 2 -->
                        <div class="row">


                          <div class="form-group col-md-4">
                            <label for="validationDefault01" class="form-label">Problem</label>
                            <input type="text" class="form-control" id="problem" name="problem" placeholder="Description" required>
                          </div>

                          <div class="form-group col-md-4">
                            <label for="validationDefault01" class="form-label">Work Done</label>
                            <input type="text" class="form-control" id="workdone" name="workdone" placeholder="Description" required>
                          </div>

                          <div class="form-group col-md-4">
                            <label for="inputName" class="control-label">External Work Required</label>
                            <select class="form-control col-md-4"name="ewr" id="ewr" class="form-control" required="">
                              <option value="">External Work Requires</option>
                              <option value="Yes">Yes</option>
                              <option value="No">No</option>
                          </select>
                         </div>


        
                        </div>
        
        <!-- row 3 -->
<div class="row">
  <div class="form-group col-md-4">
    <label for="validationDefault01" class="form-label">Date</label>
    <input type="date" id="date1" name="date1" class="form-control" required>
  </div>

  <div class="form-group col-md-4">
    <button class="btn btn-primary" type="submit" style="margin-top: 32px;">Register</button>
  </div>

</div>

        
                    
        
                      </form>
                  </div>
                    </div>  
                  
                    <div class="col-xs-12">
                      <h4 class="text-center alert" style="background-color: #304FFE; color: white;"> Transport Maintiance Details </h4>
                      <table id="example" class="table table-dark table-hover">
                        <thead>
                          <tr>
                            <th scope="col">#</th>
                            <th scope="col">Driver ID</th>
                            <th scope="col">Vehicle ID</th>
                            <th scope="col">Mechanice ID</th>
                            <th scope="col">Problem</th> 
                            <th scope="col">Work Done</th> 
                            <th scope="col">External Work</th> 
                            <th scope="col">Date</th>        
                          </tr>
                          </thead>
                          <tbody>
                          <!-- Run a for loop here and iterate through all the index -->
                          {% for employee in task %}
                          
                          <tr>
                          
                             
                            <td class="table-secondary" >{{employee.id}}</td>
                            <td class="table-secondary" >{{employee.driver_id}}</td>
                            <td class="table-secondary" >{{employee.vid}}</td>
                            <td class="table-secondary" >{{employee.meachanice_id}}</td>
                            <td class="table-secondary" >{{employee.problem}}</td>
                            <td class="table-secondary" >{{employee.workdone}}</td>
                            <td class="table-secondary" >{{employee.ewr}}</td>
                            <td class="table-secondary" >{{employee.date1}}</td>
  
                
                                       
                          </tr>
                          
                          {% endfor %}
                        
                          </tbody>
                    
                           
                      </table>
                    </div>  



<!-- </div> -->                
</div>
</div>
</div>




                             <!-- Alerts links -->
                             <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
                             <!--JQuery CDN-->
                             <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
                             <!--Sweet Alert CDN-->
                             <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
                           
                                  <script>
                            
                           
                                   $('.delete').on('click',function (e) {
                                         e.preventDefault();
                                         var self = $(this);
                                         console.log(self.data('title'));
                                         Swal.fire({
                                             title: 'Are you sure?',
                                             text: "You won't be able to revert this!",
                                             icon: 'warning',
                                             showCancelButton: true,
                                             confirmButtonColor: '#3085d6',
                                             cancelButtonColor: '#d33',
                                             confirmButtonText: 'Yes, delete it!'
                                         }).then((result) => {
                                             if (result.isConfirmed) {
                                                 Swal.fire(
                                                     'Deleted!',
                                                     'Your file has been deleted.',
                                                     'success'
                                                 )
                                               location.href = self.attr('href');
                                             }
                                             else {
                                     swal.fire("Your imaginary file is safe!");
                                   }
                                         })
                                 
                                     })
                                 
                                     {% for msg in messages %}
                                     swal.fire('{{msg}}',Swal.fire(
                                       'Your file has been deleted.',
                                       'success'
                                   ));
                                     {% endfor %}
                                 </script>

{% endblock %}
