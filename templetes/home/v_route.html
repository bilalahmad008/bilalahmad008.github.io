{% extends 'home/reportbase.html' %}
{% load static %}
{% block body %}



 <div id="wrapper">
        <div class="main-content">
            <div class="row small-spacing">

             
                    <div class="container-fluid" style="background-color: rgb(245, 247, 250);">
                      <h3>Transport Routes Details</h3>
                      
                      <form method="post">
                        {% csrf_token %}
                         <!-- row 1 -->
                         <div class="row">
        
                           

                            <div class="form-group col-md-4">
                              <label for="inputName" class="control-label">Select City</label>
                              <select class="form-control col-md-4" name="city" aria-label="Default select example" onChange="form.submit();" required>
                                <option  data-display="Select">{{city}}</option>
                                
                                {% for i in allcity %}
                                <option value="{{i.name}}" >{{i.name}}</option>
                                {% endfor %}
                                
                                </select>
                           </div>

                           <div class="form-group col-md-4">
                            <label for="inputName" class="control-label">Select Route</label>
                            <select class="form-control col-md-4" name="route" id="route"  onChange="form.submit();" required>
                              <option >{{idnt}}</option>
                                
                              {% for i in routee %}
                              <option value="{{i.name}}">{{i.name}}</option>
                              {% endfor %}
                            </select>
                         </div>


                         <div class="form-group col-md-4">
                          <label for="inputName" class="control-label">Select Stop</label>
                          <select class="form-control col-md-4" name="stop" id="stop"  required>
                            <option value=""> Select stop</option>
                              
                            {% for i in stops %}
                            <option value="{{i.name}}">{{i.name}}</option>
                            {% endfor %}
                          </select>
                       </div>
                         
        
        
                        </div>
                     
        <!-- row 2 -->
                        <div class="row">
                         




                       <div class="form-group col-md-4">
                        <label for="name" class="form-label">Time</label>
                          <input class="form-control"type="Time" id="time" name="time"  required>    
                      </div>   
        
                       <div class="col-md-4">
                        <button class="btn btn-primary" type="submit" style="margin-top: 32px;">Register</button>
                      </div>
                         
          
            
        
                        </div>
        
        

        
                    
        
                      </form>
                      
            
                     
                    
                  </div>
              
                    <div class="container-fluid">

                      

                         
                    <div class="col-xs-12">
                      <h4 class="text-center alert" style="background-color: #304FFE; color: white;"> Transport Routes Details </h4>
                      <form action="{%  url 'downloadroutes' %}" method="post">
                        {% csrf_token %}
                    

                        
                      <div class="form-group col-md-4">
                        <select class="form-control col-md-4" name="routename" id="routename" aria-label="Default select example" required>
                        <option value="" >Select Route</option>
                        {% for i in downloadroute %}
                        <option value="{{i.name}}" >{{i.name}}</option>
                        {% endfor %}
                        
                        </select>
                      </div>

                      <div class="form-group col-md-4">

                        <button class="btn btn-primary" type="submit" >Download</button>
                      </div>
                      
                      
                    
                    </form>

                      </div>


                      
                      <table id="example" class="table table-dark table-hover" >
                        <thead>
                          <tr>
                            <th scope="col">#</th>
                            <th scope="col">Route</th>
                            <th scope="col">City</th>
                            <th scope="col">Stop</th> 
                            <th scope="col">Time</th> 
                          </tr>
                          </thead>
                          <tbody>
                          <!-- Run a for loop here and iterate through all the index -->
                          {% for employee in allroute %}
                          
                          <tr>
                          
                             
                            <td class="table-secondary" >{{employee.rid}}</td>
                            <td class="table-secondary" >{{employee.routes}}</td>
                            <td class="table-secondary" >{{employee.city}}</td>
                            <td class="table-secondary" >{{employee.stop}}</td>
                            <td class="table-secondary" >{{employee.time}}</td>
<!-- 
                            <td class="table-secondary" >

                              <img src="{% static 'image/update_64.png' %}" alt="" style="width: 30px; height: 30px;">
                              <img src="{% static 'image/delete.png' %}" alt="" style="margin-left: 10px; width: 30px; height: 30px;"> 
                            </td> -->
                
                                       
                          </tr>
                          
                          {% endfor %}
                        
                          </tbody>
                    
                           
                      </table>

                    
                    </div>   

 




                
<!-- </div> -->                
</div>
</div>
</div>



                             <!-- Alerts links -->
                             <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
                             <!--JQuery CDN-->
                             <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
                             <!--Sweet Alert CDN-->
                             <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
                           
                                  <script>
                            
                           
                                   $('.delete').on('click',function (e) {
                                         e.preventDefault();
                                         var self = $(this);
                                         console.log(self.data('title'));
                                         Swal.fire({
                                             title: 'Are you sure?',
                                             text: "You won't be able to revert this!",
                                             icon: 'warning',
                                             showCancelButton: true,
                                             confirmButtonColor: '#3085d6',
                                             cancelButtonColor: '#d33',
                                             confirmButtonText: 'Yes, delete it!'
                                         }).then((result) => {
                                             if (result.isConfirmed) {
                                                 Swal.fire(
                                                     'Deleted!',
                                                     'Your file has been deleted.',
                                                     'success'
                                                 )
                                               location.href = self.attr('href');
                                             }
                                             else {
                                     swal.fire("Your imaginary file is safe!");
                                   }
                                         })
                                 
                                     })
                                 
                                     {% for msg in messages %}
                                     swal.fire('{{msg}}',Swal.fire(
                                       'Your file has been deleted.',
                                       'success'
                                   ));
                                     {% endfor %}
                                 </script>

{% endblock %}
